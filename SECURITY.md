# üîí –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –∑ –±–µ–∑–ø–µ–∫–∏ —Ñ–æ—Ä–º–∏

## ‚ö†Ô∏è –í–ê–ñ–õ–ò–í–û! –û–±–æ–≤'—è–∑–∫–æ–≤–æ –≤–∏–∫–æ–Ω–∞–π—Ç–µ —Ü—ñ –∫—Ä–æ–∫–∏ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –≤ –ø—Ä–æ–¥–∞–∫—à–Ω:

### 1. **–ù–∞–ª–∞—à—Ç—É–π—Ç–µ reCAPTCHA v3**

1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ https://www.google.com/recaptcha/admin
2. –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π —Å–∞–π—Ç –∑ —Ç–∏–ø–æ–º "reCAPTCHA v3"
3. –î–æ–¥–∞–π—Ç–µ –≤–∞—à –¥–æ–º–µ–Ω –≤ —Å–ø–∏—Å–æ–∫ –¥–æ–º–µ–Ω—ñ–≤
4. –ó–∞–º—ñ–Ω—ñ—Ç—å `6LfYourSiteKeyHere` –≤ `index.html` –Ω–∞ –≤–∞—à Site Key
5. –ó–∞–º—ñ–Ω—ñ—Ç—å `YOUR_RECAPTCHA_SECRET_KEY` –≤ `telegram-proxy-secure.php` –Ω–∞ –≤–∞—à Secret Key

### 2. **–ù–∞–ª–∞—à—Ç—É–π—Ç–µ –æ–±–º–µ–∂–µ–Ω–Ω—è –¥–æ–º–µ–Ω—ñ–≤**

–í —Ñ–∞–π–ª—ñ `telegram-proxy-secure.php` –∑–∞–º—ñ–Ω—ñ—Ç—å:

```php
$allowed_origins = ['https://yourdomain.com', 'https://www.yourdomain.com'];
```

–Ω–∞ –≤–∞—à—ñ —Ä–µ–∞–ª—å–Ω—ñ –¥–æ–º–µ–Ω–∏.

### 3. **–ü—Ä–∏—Ö–æ–≤–∞–π—Ç–µ —á—É—Ç–ª–∏–≤—ñ –¥–∞–Ω—ñ**

–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–µ–Ω—ñ –ø—Ä–æ–µ–∫—Ç—É:

```
BOT_TOKEN=8468604805:AAH1dI-2X8yRdhKu-g7XGyOtRkHaAIKDiuo
CHAT_ID=7728823984
RECAPTCHA_SECRET=YOUR_RECAPTCHA_SECRET_KEY
```

–Ü –∑–º—ñ–Ω—ñ—Ç—å `telegram-proxy-secure.php`:

```php
$botToken = $_ENV['BOT_TOKEN'] ?? '8468604805:AAH1dI-2X8yRdhKu-g7XGyOtRkHaAIKDiuo';
$chatId = $_ENV['CHAT_ID'] ?? '7728823984';
$recaptcha_secret = $_ENV['RECAPTCHA_SECRET'] ?? 'YOUR_RECAPTCHA_SECRET_KEY';
```

### 4. **–ù–∞–ª–∞—à—Ç—É–π—Ç–µ .htaccess –¥–ª—è –¥–æ–¥–∞—Ç–∫–æ–≤–æ—ó –±–µ–∑–ø–µ–∫–∏**

–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `.htaccess`:

```apache
# –ó–∞–±–æ—Ä–æ–Ω–∞ –¥–æ—Å—Ç—É–ø—É –¥–æ .env —Ñ–∞–π–ª—É
<Files ".env">
    Order allow,deny
    Deny from all
</Files>

# –ó–∞–±–æ—Ä–æ–Ω–∞ –¥–æ—Å—Ç—É–ø—É –¥–æ .htaccess
<Files ".htaccess">
    Order allow,deny
    Deny from all
</Files>

# –û–±–º–µ–∂–µ–Ω–Ω—è —Ä–æ–∑–º—ñ—Ä—É POST –∑–∞–ø–∏—Ç—ñ–≤
LimitRequestBody 10485760

# –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ SQL —ñ–Ω'—î–∫—Ü—ñ–π (—è–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ –ë–î)
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{QUERY_STRING} (\<|%3C).*script.*(\>|%3E) [NC,OR]
    RewriteCond %{QUERY_STRING} GLOBALS(=|\[|\%[0-9A-Z]{0,2}) [OR]
    RewriteCond %{QUERY_STRING} _REQUEST(=|\[|\%[0-9A-Z]{0,2}) [OR]
    RewriteCond %{QUERY_STRING} ^.*(\[|\]|\(|\)|<|>|√™|"|;|\?|\*|=$).* [NC,OR]
    RewriteCond %{QUERY_STRING} (NULL|OUTFILE|LOAD_FILE) [OR]
    RewriteCond %{QUERY_STRING} (\./|\../|\.../)+(motd|etc|bin) [NC,OR]
    RewriteCond %{QUERY_STRING} (localhost|loopback|127\.0\.0\.1) [NC,OR]
    RewriteCond %{QUERY_STRING} (<|>|'|%0A|%0D|%27|%3C|%3E|%00) [NC,OR]
    RewriteCond %{QUERY_STRING} concat[^\(]*\( [NC,OR]
    RewriteCond %{QUERY_STRING} union([^s]*s)+elect [NC,OR]
    RewriteCond %{QUERY_STRING} union([^a]*a)+ll([^s]*s)+elect [NC,OR]
    RewriteCond %{QUERY_STRING} \-[sdcr].*(allow_url_include|allow_url_fopen|safe_mode|disable_functions|auto_prepend_file) [NC,OR]
    RewriteCond %{QUERY_STRING} (;|<|>|'|"|\)|%0A|%0D|%22|%27|%3C|%3E|%00).*(/\*|union|select|insert|drop|delete|update|cast|create|char|convert|alter|declare|or|script|set|md5|benchmark|encode) [NC,OR]
    RewriteCond %{QUERY_STRING} sp_executesql [NC]
    RewriteRule ^(.*)$ - [F,L]
</IfModule>
```

### 5. **–î–æ–¥–∞—Ç–∫–æ–≤—ñ –∑–∞—Ö–æ–¥–∏ –±–µ–∑–ø–µ–∫–∏**

#### A. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ HTTPS

- –û–±–æ–≤'—è–∑–∫–æ–≤–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ HTTPS –≤ –ø—Ä–æ–¥–∞–∫—à–Ω—ñ
- –ù–∞–ª–∞—à—Ç—É–π—Ç–µ HSTS –∑–∞–≥–æ–ª–æ–≤–∫–∏

#### B. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è

–î–æ–¥–∞–π—Ç–µ –≤ `telegram-proxy-secure.php`:

```php
// –õ–æ–≥—É–≤–∞–Ω–Ω—è –ø—ñ–¥–æ–∑—Ä—ñ–ª–∏—Ö –¥—ñ–π
$log_file = 'security.log';
$log_entry = date('Y-m-d H:i:s') . ' - IP: ' . ($_SERVER['HTTP_X_FORWARDED_FOR'] ?? $_SERVER['REMOTE_ADDR']) . ' - Data: ' . json_encode($input) . PHP_EOL;
file_put_contents($log_file, $log_entry, FILE_APPEND | LOCK_EX);
```

#### C. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

- –ù–∞–ª–∞—à—Ç—É–π—Ç–µ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ –ø—ñ–¥–æ–∑—Ä—ñ–ª—É –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å
- –†–µ–≥—É–ª—è—Ä–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä—è–π—Ç–µ –ª–æ–≥–∏
- –ù–∞–ª–∞—à—Ç—É–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è

### 6. **–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –±–µ–∑–ø–µ–∫–∏**

#### A. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∑–∞—Ö–∏—Å—Ç –≤—ñ–¥ —Å–ø–∞–º—É

- –°–ø—Ä–æ–±—É–π—Ç–µ –≤—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ —Ñ–æ—Ä–º—É –∑ –ø—ñ–¥–æ–∑—Ä—ñ–ª–∏–º–∏ —Å–ª–æ–≤–∞–º–∏
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –æ–±–º–µ–∂–µ–Ω–Ω—è —á–∞—Å—Ç–æ—Ç–∏ –∑–∞–ø–∏—Ç—ñ–≤

#### B. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é

- –°–ø—Ä–æ–±—É–π—Ç–µ –≤—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ HTML —Ç–µ–≥–∏
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –æ–±–º–µ–∂–µ–Ω–Ω—è –¥–æ–≤–∂–∏–Ω–∏ –ø–æ–ª—ñ–≤
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é email —Ç–∞ —Ç–µ–ª–µ—Ñ–æ–Ω—É

#### C. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ CORS

- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ —Ñ–æ—Ä–º–∞ –ø—Ä–∞—Ü—é—î —Ç—ñ–ª—å–∫–∏ –∑ –≤–∞—à–æ–≥–æ –¥–æ–º–µ–Ω—É

## üö® –ß–µ—Ä–≤–æ–Ω–∏–π —Å–ø–∏—Å–æ–∫ - –ù–Ü–ö–û–õ–ò –Ω–µ —Ä–æ–±—ñ—Ç—å:

1. ‚ùå –ù–µ –∑–±–µ—Ä—ñ–≥–∞–π—Ç–µ —Ç–æ–∫–µ–Ω–∏ –≤ –∫–æ–¥—ñ
2. ‚ùå –ù–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ HTTP –≤ –ø—Ä–æ–¥–∞–∫—à–Ω—ñ
3. ‚ùå –ù–µ —ñ–≥–Ω–æ—Ä—É–π—Ç–µ CORS –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
4. ‚ùå –ù–µ –≤—ñ–¥–∫–ª—é—á–∞–π—Ç–µ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é
5. ‚ùå –ù–µ –∑–±–µ—Ä—ñ–≥–∞–π—Ç–µ –ª–æ–≥–∏ –∑ —á—É—Ç–ª–∏–≤–∏–º–∏ –¥–∞–Ω–∏–º–∏
6. ‚ùå –ù–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Å—Ç–∞—Ä—ñ –≤–µ—Ä—Å—ñ—ó –±—ñ–±–ª—ñ–æ—Ç–µ–∫

## ‚úÖ –ó–µ–ª–µ–Ω–∏–π —Å–ø–∏—Å–æ–∫ - –∑–∞–≤–∂–¥–∏ —Ä–æ–±—ñ—Ç—å:

1. ‚úÖ –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–Ω–æ–≤–ª—é–π—Ç–µ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
2. ‚úÖ –ú–æ–Ω—ñ—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏
3. ‚úÖ –¢–µ—Å—Ç—É–π—Ç–µ –±–µ–∑–ø–µ–∫—É
4. ‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ HTTPS
5. ‚úÖ –í–∞–ª—ñ–¥—É–π—Ç–µ –≤—Å—ñ –¥–∞–Ω—ñ
6. ‚úÖ –û–±–º–µ–∂—É–π—Ç–µ –¥–æ—Å—Ç—É–ø

## üìû –£ —Ä–∞–∑—ñ –ø—Ä–æ–±–ª–µ–º:

1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è reCAPTCHA
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ CORS –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
4. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –≤–∞–ª—ñ–¥–Ω—ñ—Å—Ç—å —Ç–æ–∫–µ–Ω—ñ–≤

---

**–î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è:** 2025-01-27  
**–í–µ—Ä—Å—ñ—è:** 1.0  
**–ê–≤—Ç–æ—Ä:** AI Assistant
